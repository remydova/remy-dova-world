<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>zine builder Â· remy's world</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Lora:ital,wght@0,400;0,500;1,400&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0c0c18;
    --surface: #13131f;
    --surface2: #1a1a2e;
    --amber: #d4956a;
    --amber-soft: rgba(212,149,106,0.15);
    --teal: #7fb5a0;
    --teal-soft: rgba(127,181,160,0.15);
    --lavender: #9b8bb4;
    --lavender-soft: rgba(155,139,180,0.15);
    --rose: #c4847a;
    --cream: #f0e6d3;
    --cream-dim: rgba(240,230,211,0.7);
    --text: #e8ddd0;
    --text-dim: rgba(232,221,208,0.55);
    --border: rgba(212,149,106,0.18);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html { cursor: none; scroll-behavior: smooth; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Lora', Georgia, serif;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  /* â”€â”€ GRAIN OVERLAY â”€â”€ */
  body::before {
    content: '';
    position: fixed; inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none; z-index: 9999;
    opacity: 0.35;
  }

  /* â”€â”€ MOON CURSOR â”€â”€ */
  #moon-cursor {
    position: fixed;
    width: 28px; height: 28px;
    pointer-events: none;
    z-index: 99999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s ease;
    font-size: 22px;
    line-height: 1;
    filter: drop-shadow(0 0 6px rgba(212,149,106,0.6));
  }
  #moon-cursor.clicking { transform: translate(-50%, -50%) scale(0.8); }

  /* â”€â”€ RAIN CANVAS â”€â”€ */
  #rain-canvas {
    position: fixed; inset: 0;
    pointer-events: none;
    z-index: 1;
    opacity: 0.35;
  }

  /* â”€â”€ PETALS â”€â”€ */
  #petals-container {
    position: fixed; inset: 0;
    pointer-events: none;
    z-index: 2;
    overflow: hidden;
  }
  .petal {
    position: absolute;
    top: -20px;
    font-size: 10px;
    opacity: 0;
    animation: petalFall linear infinite;
    filter: blur(0.5px);
  }
  @keyframes petalFall {
    0%   { opacity: 0; transform: translateY(-20px) rotate(0deg); }
    10%  { opacity: 0.6; }
    90%  { opacity: 0.4; }
    100% { opacity: 0; transform: translateY(105vh) rotate(720deg) translateX(60px); }
  }

  /* â”€â”€ STARS â”€â”€ */
  #stars-container {
    position: fixed; inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }
  .star {
    position: absolute;
    border-radius: 50%;
    background: white;
    animation: twinkle ease-in-out infinite;
  }
  @keyframes twinkle {
    0%, 100% { opacity: 0.1; transform: scale(1); }
    50%       { opacity: 0.8; transform: scale(1.3); }
  }

  /* â”€â”€ NAV â”€â”€ */
  nav {
    position: fixed; top: 0; left: 0; right: 0;
    z-index: 1000;
    background: rgba(12,12,24,0.88);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    padding: 0 2rem;
    height: 60px;
    display: flex; align-items: center; justify-content: space-between;
  }
  .nav-logo {
    font-family: 'Caveat', cursive;
    font-size: 1.3rem;
    color: var(--amber);
    letter-spacing: 0.02em;
    text-decoration: none;
    display: flex; align-items: center; gap: 0.4rem;
  }
  .nav-links {
    display: flex; align-items: center; gap: 0.25rem;
    list-style: none;
  }
  .nav-links a {
    font-family: 'Caveat', cursive;
    font-size: 1.05rem;
    color: var(--text-dim);
    text-decoration: none;
    padding: 0.35rem 0.7rem;
    border-radius: 20px;
    transition: all 0.25s ease;
    letter-spacing: 0.02em;
  }
  .nav-links a:hover { color: var(--text); background: var(--amber-soft); }
  .nav-links a.active { color: var(--amber); background: var(--amber-soft); }
  .nav-hideout {
    font-family: 'Caveat', cursive;
    font-size: 0.9rem;
    color: var(--teal);
    text-decoration: none;
    border: 1px solid rgba(127,181,160,0.3);
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    transition: all 0.25s ease;
    white-space: nowrap;
  }
  .nav-hideout:hover {
    background: var(--teal-soft);
    border-color: var(--teal);
    transform: translateY(-1px);
  }

  /* â”€â”€ MAIN LAYOUT â”€â”€ */
  main {
    padding-top: 60px;
    position: relative; z-index: 10;
    min-height: 100vh;
  }

  /* â”€â”€ PAGE HERO â”€â”€ */
  .page-hero {
    text-align: center;
    padding: 4rem 2rem 2.5rem;
    position: relative;
  }
  .page-hero::after {
    content: '';
    position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
    width: 80px; height: 1px;
    background: linear-gradient(90deg, transparent, var(--amber), transparent);
  }
  .page-hero .eyebrow {
    font-family: 'Caveat', cursive;
    font-size: 1rem;
    color: var(--amber);
    letter-spacing: 0.1em;
    opacity: 0.8;
    margin-bottom: 0.6rem;
  }
  .page-hero h1 {
    font-family: 'Playfair Display', Georgia, serif;
    font-size: clamp(2.2rem, 5vw, 3.5rem);
    font-weight: 700;
    line-height: 1.1;
    color: var(--cream);
    margin-bottom: 1rem;
  }
  .page-hero h1 em {
    font-style: italic;
    color: var(--amber);
  }
  .page-hero p {
    font-family: 'Lora', serif;
    font-size: 1rem;
    color: var(--text-dim);
    max-width: 480px;
    margin: 0 auto;
    line-height: 1.7;
  }

  /* â”€â”€ ZINE BUILDER FORM â”€â”€ */
  .builder-wrap {
    max-width: 760px;
    margin: 3rem auto 0;
    padding: 0 1.5rem;
  }

  .builder-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 2.5rem;
    position: relative;
    overflow: hidden;
  }
  .builder-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--amber), var(--teal), var(--lavender));
  }

  .form-section { margin-bottom: 2rem; }
  .form-label {
    display: block;
    font-family: 'Caveat', cursive;
    font-size: 1.1rem;
    color: var(--amber);
    margin-bottom: 0.75rem;
    letter-spacing: 0.03em;
  }
  .form-label span {
    font-family: 'Lora', serif;
    font-size: 0.8rem;
    color: var(--text-dim);
    font-weight: 400;
    margin-left: 0.4rem;
    letter-spacing: 0;
  }

  /* THEME GRID */
  .theme-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 0.65rem;
  }
  .theme-btn {
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 12px;
    padding: 0.85rem 1rem;
    cursor: none;
    text-align: left;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  .theme-btn::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, var(--amber-soft), transparent);
    opacity: 0;
    transition: opacity 0.2s;
  }
  .theme-btn:hover::before, .theme-btn.selected::before { opacity: 1; }
  .theme-btn:hover { border-color: var(--amber); transform: translateY(-2px); }
  .theme-btn.selected { border-color: var(--amber); box-shadow: 0 0 0 1px var(--amber), 0 4px 20px rgba(212,149,106,0.2); }
  .theme-btn .theme-emoji { font-size: 1.3rem; display: block; margin-bottom: 0.3rem; }
  .theme-btn .theme-name {
    font-family: 'Caveat', cursive;
    font-size: 1rem;
    color: var(--cream);
    display: block;
  }
  .theme-btn .theme-desc {
    font-family: 'Lora', serif;
    font-size: 0.72rem;
    color: var(--text-dim);
    line-height: 1.4;
    margin-top: 0.2rem;
  }

  /* COLOR MOOD */
  .mood-grid {
    display: flex; flex-wrap: wrap; gap: 0.6rem;
  }
  .mood-btn {
    display: flex; align-items: center; gap: 0.5rem;
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 30px;
    padding: 0.5rem 1rem;
    cursor: none;
    transition: all 0.2s ease;
    font-family: 'Caveat', cursive;
    font-size: 0.95rem;
    color: var(--text-dim);
  }
  .mood-btn .mood-dot {
    width: 10px; height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .mood-btn:hover { transform: translateY(-2px); }
  .mood-btn.selected { color: var(--cream); }

  .mood-btn[data-mood="amber"] .mood-dot    { background: #d4956a; }
  .mood-btn[data-mood="sage"] .mood-dot     { background: #7fb5a0; }
  .mood-btn[data-mood="lavender"] .mood-dot { background: #9b8bb4; }
  .mood-btn[data-mood="midnight"] .mood-dot { background: #6b7fa3; }
  .mood-btn[data-mood="rose"] .mood-dot     { background: #c4847a; }
  .mood-btn[data-mood="amber"].selected    { border-color: #d4956a; background: rgba(212,149,106,0.15); color: #d4956a; }
  .mood-btn[data-mood="sage"].selected     { border-color: #7fb5a0; background: rgba(127,181,160,0.15); color: #7fb5a0; }
  .mood-btn[data-mood="lavender"].selected { border-color: #9b8bb4; background: rgba(155,139,180,0.15); color: #9b8bb4; }
  .mood-btn[data-mood="midnight"].selected { border-color: #6b7fa3; background: rgba(107,127,163,0.15); color: #6b7fa3; }
  .mood-btn[data-mood="rose"].selected     { border-color: #c4847a; background: rgba(196,132,122,0.15); color: #c4847a; }

  /* TEXT INPUTS */
  .text-input {
    width: 100%;
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 0.85rem 1.1rem;
    color: var(--cream);
    font-family: 'Caveat', cursive;
    font-size: 1.05rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    caret-color: var(--amber);
  }
  .text-input::placeholder { color: var(--text-dim); opacity: 0.6; }
  .text-input:focus {
    border-color: var(--amber);
    box-shadow: 0 0 0 3px rgba(212,149,106,0.12);
  }

  /* ART TOGGLES */
  .toggle-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 0.5rem;
  }
  .toggle-btn {
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    padding: 0.65rem 0.9rem;
    cursor: none;
    display: flex; align-items: center; gap: 0.5rem;
    transition: all 0.2s;
    font-family: 'Caveat', cursive;
    font-size: 0.95rem;
    color: var(--text-dim);
  }
  .toggle-btn .toggle-icon { font-size: 1rem; }
  .toggle-btn.active {
    border-color: var(--teal);
    color: var(--teal);
    background: var(--teal-soft);
  }
  .toggle-check {
    margin-left: auto;
    width: 16px; height: 16px;
    border: 1.5px solid currentColor;
    border-radius: 4px;
    display: flex; align-items: center; justify-content: center;
    font-size: 10px;
    flex-shrink: 0;
  }

  /* GENERATE BUTTON */
  .generate-btn {
    width: 100%;
    margin-top: 0.5rem;
    background: linear-gradient(135deg, var(--amber), #c47c50);
    border: none;
    border-radius: 14px;
    padding: 1.1rem;
    color: #1a0f06;
    font-family: 'Caveat', cursive;
    font-size: 1.3rem;
    font-weight: 600;
    cursor: none;
    transition: all 0.25s ease;
    letter-spacing: 0.03em;
    position: relative; overflow: hidden;
  }
  .generate-btn::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.15), transparent);
    opacity: 0; transition: opacity 0.2s;
  }
  .generate-btn:hover::before { opacity: 1; }
  .generate-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(212,149,106,0.4); }
  .generate-btn:active { transform: translateY(0); }
  .generate-btn:disabled { opacity: 0.6; transform: none; cursor: not-allowed; }

  /* DIVIDER */
  .section-divider {
    border: none;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border), transparent);
    margin: 2rem 0;
  }

  /* LOADING STATE */
  .loading-wrap {
    display: none;
    text-align: center;
    padding: 3rem 1rem;
  }
  .loading-wrap.show { display: block; }
  .loading-dots {
    display: inline-flex; gap: 0.4rem;
    margin-bottom: 1rem;
  }
  .loading-dots span {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--amber);
    animation: dotPulse 1.4s ease-in-out infinite;
  }
  .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
  .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes dotPulse {
    0%, 80%, 100% { opacity: 0.2; transform: scale(0.8); }
    40%            { opacity: 1;   transform: scale(1.1); }
  }
  .loading-text {
    font-family: 'Caveat', cursive;
    font-size: 1.1rem;
    color: var(--text-dim);
  }

  /* â”€â”€ ZINE OUTPUT â”€â”€ */
  #zine-output { display: none; }
  #zine-output.show { display: block; margin-top: 3rem; }

  .zine-page {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 2.5rem 2.5rem 3rem;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
    page-break-inside: avoid;
  }
  .zine-page::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 3px;
    background: var(--page-accent, linear-gradient(90deg, var(--amber), var(--teal)));
  }

  /* Torn paper edge on pages */
  .zine-page.torn-edge::after {
    content: '';
    position: absolute; bottom: -1px; left: 0; right: 0;
    height: 15px;
    background: var(--bg);
    clip-path: polygon(0 100%, 3% 0, 6% 80%, 9% 10%, 12% 60%, 15% 0, 18% 70%, 21% 5%, 24% 50%, 27% 0, 30% 85%, 33% 15%, 36% 65%, 39% 5%, 42% 75%, 45% 0, 48% 55%, 51% 0, 54% 80%, 57% 10%, 60% 60%, 63% 0, 66% 70%, 69% 5%, 72% 50%, 75% 0, 78% 85%, 81% 15%, 84% 65%, 87% 5%, 90% 75%, 93% 0, 96% 55%, 100% 0, 100% 100%);
  }

  .zine-page-number {
    position: absolute; top: 1rem; right: 1.5rem;
    font-family: 'Caveat', cursive;
    font-size: 0.85rem;
    color: var(--text-dim);
  }

  .zine-page-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--cream);
    margin-bottom: 0.4rem;
    line-height: 1.2;
  }
  .zine-page-title em { font-style: italic; }

  .zine-issue-badge {
    display: inline-block;
    font-family: 'Caveat', cursive;
    font-size: 0.85rem;
    color: var(--amber);
    border: 1px solid rgba(212,149,106,0.3);
    padding: 0.2rem 0.6rem;
    border-radius: 20px;
    margin-bottom: 1.2rem;
  }

  .zine-body {
    font-family: 'Lora', serif;
    font-size: 0.95rem;
    line-height: 1.8;
    color: var(--text-dim);
  }
  .zine-body p { margin-bottom: 1rem; }
  .zine-body h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem;
    color: var(--cream);
    margin: 1.5rem 0 0.5rem;
    font-style: italic;
  }

  /* Handwritten annotation */
  .annotation {
    font-family: 'Caveat', cursive;
    font-size: 1rem;
    color: var(--amber);
    transform: rotate(-2deg);
    display: inline-block;
    margin: 0.5rem 0;
    opacity: 0.85;
  }

  /* SVG doodles */
  .doodle-wrap {
    display: flex; flex-wrap: wrap; gap: 0.4rem;
    margin: 1rem 0;
    opacity: 0.6;
  }
  .doodle-wrap svg { width: 24px; height: 24px; }

  /* Stamp effect */
  .stamp {
    display: inline-block;
    border: 2px solid var(--teal);
    color: var(--teal);
    font-family: 'Caveat', cursive;
    font-size: 0.8rem;
    padding: 0.2rem 0.6rem;
    border-radius: 4px;
    transform: rotate(-3deg);
    opacity: 0.7;
    letter-spacing: 0.05em;
    margin: 0.5rem 0;
  }

  /* Tape strip */
  .tape {
    display: block;
    width: 60px; height: 18px;
    background: rgba(255,255,255,0.06);
    border-top: 1px solid rgba(255,255,255,0.08);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    transform: rotate(-1deg);
    margin: 0 auto 0.5rem;
  }

  /* Journal prompt blocks */
  .prompt-block {
    background: rgba(255,255,255,0.03);
    border-left: 2px solid var(--amber);
    border-radius: 0 10px 10px 0;
    padding: 0.8rem 1rem;
    margin: 1rem 0;
  }
  .prompt-block .prompt-label {
    font-family: 'Caveat', cursive;
    font-size: 0.8rem;
    color: var(--amber);
    letter-spacing: 0.05em;
    margin-bottom: 0.3rem;
  }
  .prompt-block .prompt-text {
    font-family: 'Lora', serif;
    font-size: 0.9rem;
    color: var(--text-dim);
    font-style: italic;
  }

  /* Lines for journaling */
  .write-lines {
    margin: 1rem 0;
  }
  .write-line {
    border-bottom: 1px solid rgba(255,255,255,0.06);
    height: 28px;
  }

  /* Dedication page */
  .dedication-wrap {
    text-align: center;
    padding: 1rem 0 2rem;
  }
  .dedication-label {
    font-family: 'Caveat', cursive;
    font-size: 0.9rem;
    color: var(--text-dim);
    margin-bottom: 0.5rem;
  }
  .dedication-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    font-style: italic;
    color: var(--cream);
  }

  /* Lofi hideout footer on zine */
  .zine-hideout-link {
    display: block;
    text-align: center;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid rgba(255,255,255,0.06);
  }
  .zine-hideout-link a {
    font-family: 'Caveat', cursive;
    font-size: 1rem;
    color: var(--teal);
    text-decoration: none;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  .zine-hideout-link a:hover { opacity: 1; }

  /* ACTION BUTTONS */
  .zine-actions {
    display: flex; gap: 0.75rem; flex-wrap: wrap;
    margin-top: 2rem; margin-bottom: 4rem;
  }
  .action-btn {
    flex: 1; min-width: 140px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 0.9rem 1.2rem;
    color: var(--text);
    font-family: 'Caveat', cursive;
    font-size: 1rem;
    cursor: none;
    text-align: center;
    transition: all 0.2s;
  }
  .action-btn:hover { background: var(--amber-soft); border-color: var(--amber); transform: translateY(-2px); }
  .action-btn.primary { background: var(--teal-soft); border-color: var(--teal); color: var(--teal); }
  .action-btn.primary:hover { background: rgba(127,181,160,0.25); }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    background: var(--surface);
    border-top: 1px solid var(--border);
    padding: 2rem;
    text-align: center;
    position: relative; z-index: 10;
  }
  .footer-hideout {
    display: inline-block;
    font-family: 'Caveat', cursive;
    font-size: 1.1rem;
    color: var(--teal);
    text-decoration: none;
    padding: 0.5rem 1.2rem;
    border: 1px solid rgba(127,181,160,0.25);
    border-radius: 20px;
    margin-bottom: 1rem;
    transition: all 0.2s;
    transform: rotate(-0.5deg);
  }
  .footer-hideout:hover { background: var(--teal-soft); transform: rotate(0.5deg) translateY(-2px); }
  .footer-nav {
    display: flex; justify-content: center; gap: 1.5rem;
    flex-wrap: wrap; margin-bottom: 1rem;
  }
  .footer-nav a {
    font-family: 'Caveat', cursive;
    font-size: 0.95rem;
    color: var(--text-dim);
    text-decoration: none;
    transition: color 0.2s;
  }
  .footer-nav a:hover { color: var(--amber); }
  .footer-copy {
    font-family: 'Lora', serif;
    font-size: 0.75rem;
    color: var(--text-dim);
    opacity: 0.5;
  }

  /* â”€â”€ COLOR MOOD THEMES â”€â”€ */
  .mood-amber  { --accent: #d4956a; --accent-soft: rgba(212,149,106,0.15); }
  .mood-sage   { --accent: #7fb5a0; --accent-soft: rgba(127,181,160,0.15); }
  .mood-lavender { --accent: #9b8bb4; --accent-soft: rgba(155,139,180,0.15); }
  .mood-midnight { --accent: #6b7fa3; --accent-soft: rgba(107,127,163,0.15); }
  .mood-rose   { --accent: #c4847a; --accent-soft: rgba(196,132,122,0.15); }

  /* RESPONSIVE */
  @media (max-width: 600px) {
    nav { padding: 0 1rem; }
    .nav-links { gap: 0; }
    .nav-links a { padding: 0.3rem 0.4rem; font-size: 0.9rem; }
    .builder-card { padding: 1.5rem; }
    .theme-grid { grid-template-columns: 1fr 1fr; }
    .page-hero { padding: 3rem 1rem 2rem; }
  }

  /* PRINT */
  @media print {
    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
    nav, footer, .page-hero, .builder-card, .zine-actions, 
    #rain-canvas, #petals-container, #stars-container, #moon-cursor,
    body::before { display: none !important; }
    html, body { 
      background: #0c0c18 !important; 
      color: #e8ddd0 !important;
      margin: 0; padding: 0;
      height: auto !important;
      overflow: visible !important;
    }
    main { padding-top: 0 !important; }
    .builder-wrap { margin: 0 !important; padding: 0.5rem !important; max-width: 100% !important; }
    #zine-output { 
      display: block !important; 
      margin: 0 !important;
    }
    #zine-pages { display: block !important; }
    .zine-page { 
      background: #13131f !important;
      border: 1px solid rgba(212,149,106,0.3) !important;
      border-radius: 12px !important;
      page-break-after: always !important;
      page-break-inside: avoid !important;
      margin: 0 0 0.5rem 0 !important;
      display: block !important;
      overflow: visible !important;
    }
    .zine-page::before {
      background: linear-gradient(90deg, #d4956a, #7fb5a0) !important;
    }
    .zine-page-title { color: #f0e6d3 !important; }
    .zine-body { color: rgba(232,221,208,0.75) !important; }
    .zine-body h3 { color: #f0e6d3 !important; }
    .annotation { color: #d4956a !important; }
    .zine-hideout-link a { color: #7fb5a0 !important; }
    .zine-actions { display: none !important; }
  }
</style>
</head>
<body>

<!-- Moon cursor -->
<div id="moon-cursor">ğŸŒ™</div>

<!-- Rain canvas -->
<canvas id="rain-canvas"></canvas>

<!-- Petals -->
<div id="petals-container"></div>

<!-- Stars -->
<div id="stars-container"></div>

<!-- â”€â”€ NAVIGATION â”€â”€ -->
<nav>
  <a href="index.html" class="nav-logo">ğŸŒ™ remy's world</a>
  <ul class="nav-links">
    <li><a href="index.html">home</a></li>
    <li><a href="room.html">remy's room</a></li>
    <li><a href="zine-builder.html" class="active">zine builder</a></li>
    <li><a href="guestbook.html">guestbook</a></li>
    <li><a href="fan-pages.html">fan pages</a></li>
  </ul>
  <a href="https://remydova.github.io/lofi-hideout/" target="_blank" class="nav-hideout">need a quiet moment? â†’ lofi hideout â˜•</a>
</nav>

<!-- â”€â”€ MAIN â”€â”€ -->
<main>

  <!-- HERO -->
  <div class="page-hero">
    <div class="eyebrow">âœ¦ make something soft</div>
    <h1>the <em>zine builder</em></h1>
    <p>generate a completely unique handcrafted zine, every single time. no two are ever alike â€” just like quiet souls.</p>
  </div>

  <!-- BUILDER FORM -->
  <div class="builder-wrap">
    <div class="builder-card">

      <!-- THEME -->
      <div class="form-section">
        <label class="form-label">choose a theme <span>â€” what does your zine explore?</span></label>
        <div class="theme-grid">
          <button class="theme-btn selected" data-theme="introvert" onclick="selectTheme(this)">
            <span class="theme-emoji">ğŸŒ™</span>
            <span class="theme-name">introvert life</span>
            <span class="theme-desc">the quiet way of being in the world â€” solitude, depth, the beauty of staying in</span>
          </button>
          <button class="theme-btn" data-theme="music" onclick="selectTheme(this)">
            <span class="theme-emoji">ğŸ¹</span>
            <span class="theme-name">music & making</span>
            <span class="theme-desc">the creative process, lofi sounds, making things with your hands</span>
          </button>
          <button class="theme-btn" data-theme="cozy" onclick="selectTheme(this)">
            <span class="theme-emoji">ğŸ‚</span>
            <span class="theme-name">cozy season</span>
            <span class="theme-desc">sweaters, matcha, candlelight, the ritual of small comforts</span>
          </button>
          <button class="theme-btn" data-theme="walking" onclick="selectTheme(this)">
            <span class="theme-emoji">ğŸŒ§ï¸</span>
            <span class="theme-name">walking & noticing</span>
            <span class="theme-desc">the slow city, things you find when you pay attention</span>
          </button>
          <button class="theme-btn" data-theme="letters" onclick="selectTheme(this)">
            <span class="theme-emoji">âœ‰ï¸</span>
            <span class="theme-name">letters to quiet souls</span>
            <span class="theme-desc">words for the people who needed to hear them</span>
          </button>
          <button class="theme-btn" data-theme="ai" onclick="selectTheme(this)">
            <span class="theme-emoji">âœ¦</span>
            <span class="theme-name">ai & art making</span>
            <span class="theme-desc">what happens when human feeling meets machine pattern</span>
          </button>
        </div>
      </div>

      <hr class="section-divider">

      <!-- COLOR MOOD -->
      <div class="form-section">
        <label class="form-label">color mood <span>â€” sets the whole feeling</span></label>
        <div class="mood-grid">
          <button class="mood-btn selected" data-mood="amber" onclick="selectMood(this)">
            <span class="mood-dot"></span> amber warmth
          </button>
          <button class="mood-btn" data-mood="sage" onclick="selectMood(this)">
            <span class="mood-dot"></span> sage & teal
          </button>
          <button class="mood-btn" data-mood="lavender" onclick="selectMood(this)">
            <span class="mood-dot"></span> soft lavender
          </button>
          <button class="mood-btn" data-mood="midnight" onclick="selectMood(this)">
            <span class="mood-dot"></span> midnight blue
          </button>
          <button class="mood-btn" data-mood="rose" onclick="selectMood(this)">
            <span class="mood-dot"></span> dusty rose
          </button>
        </div>
      </div>

      <hr class="section-divider">

      <!-- DEDICATION -->
      <div class="form-section">
        <label class="form-label" for="dedication">dedication <span>â€” who is this zine for?</span></label>
        <input type="text" id="dedication" class="text-input" placeholder="this zine is for ___  (leave blank for yourself)" maxlength="80">
      </div>

      <hr class="section-divider">

      <!-- ART UPGRADES -->
      <div class="form-section">
        <label class="form-label">art upgrades <span>â€” add handcrafted details</span></label>
        <div class="toggle-grid">
          <button class="toggle-btn active" data-toggle="annotations" onclick="toggleArt(this)">
            <span class="toggle-icon">âœï¸</span> annotations
            <span class="toggle-check">âœ“</span>
          </button>
          <button class="toggle-btn active" data-toggle="doodles" onclick="toggleArt(this)">
            <span class="toggle-icon">ğŸ¨</span> svg doodles
            <span class="toggle-check">âœ“</span>
          </button>
          <button class="toggle-btn active" data-toggle="torn" onclick="toggleArt(this)">
            <span class="toggle-icon">ğŸ“„</span> torn edges
            <span class="toggle-check">âœ“</span>
          </button>
          <button class="toggle-btn active" data-toggle="stamps" onclick="toggleArt(this)">
            <span class="toggle-icon">ğŸ“®</span> stamps & tape
            <span class="toggle-check">âœ“</span>
          </button>
        </div>
      </div>

      <hr class="section-divider">

      <!-- GENERATE -->
      <button class="generate-btn" id="generate-btn" onclick="generateZine()">
        âœ¦ generate my zine âœ¦
      </button>

      <!-- LOADING -->
      <div class="loading-wrap" id="loading-wrap">
        <div class="loading-dots">
          <span></span><span></span><span></span>
        </div>
        <p class="loading-text" id="loading-text">brewing something soft...</p>
      </div>

    </div><!-- /builder-card -->

    <!-- ZINE OUTPUT -->
    <div id="zine-output">
      <div id="zine-pages"></div>
      <div class="zine-actions">
        <button class="action-btn" onclick="window.print()">ğŸ–¨ï¸ print & keep forever</button>
        <button class="action-btn" onclick="downloadZine()">ğŸŒ™ gift this zine digitally</button>
        <button class="action-btn primary" onclick="generateZine()">âœ¦ generate another</button>
      </div>
    </div>

  </div><!-- /builder-wrap -->

</main>

<!-- â”€â”€ FOOTER â”€â”€ -->
<footer>
  <a href="https://remydova.github.io/lofi-hideout/" target="_blank" class="footer-hideout">
    need a quiet moment? â†’ lofi hideout â˜•
  </a>
  <nav class="footer-nav" aria-label="Footer navigation">
    <a href="index.html">home</a>
    <a href="room.html">remy's room</a>
    <a href="zine-builder.html">zine builder</a>
    <a href="guestbook.html">guestbook</a>
    <a href="fan-pages.html">fan pages</a>
  </nav>
  <p class="footer-copy">made with love for quiet souls Â· remy's world Â· no tracking, no ads, ever</p>
</footer>

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MOON CURSOR
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const moonCursor = document.getElementById('moon-cursor');
document.addEventListener('mousemove', e => {
  moonCursor.style.left = e.clientX + 'px';
  moonCursor.style.top  = e.clientY + 'px';
});
document.addEventListener('mousedown', () => moonCursor.classList.add('clicking'));
document.addEventListener('mouseup',   () => moonCursor.classList.remove('clicking'));

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   RAIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const canvas = document.getElementById('rain-canvas');
  const ctx = canvas.getContext('2d');
  let drops = [];

  function resize() {
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  for (let i = 0; i < 120; i++) {
    drops.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      len: Math.random() * 18 + 8,
      speed: Math.random() * 2.5 + 1.5,
      opacity: Math.random() * 0.35 + 0.05,
      width: Math.random() * 0.8 + 0.3,
    });
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drops.forEach(d => {
      ctx.beginPath();
      ctx.moveTo(d.x, d.y);
      ctx.lineTo(d.x - d.len * 0.2, d.y + d.len);
      ctx.strokeStyle = `rgba(180, 200, 220, ${d.opacity})`;
      ctx.lineWidth = d.width;
      ctx.stroke();
      d.y += d.speed;
      d.x -= d.speed * 0.2;
      if (d.y > canvas.height) {
        d.y = -d.len;
        d.x = Math.random() * canvas.width;
      }
    });
    requestAnimationFrame(draw);
  }
  draw();
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PETALS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const container = document.getElementById('petals-container');
  const petalChars = ['âœ¿', 'â€', 'âœ½', 'â', 'â‹†', 'Â·'];
  const colors = ['rgba(212,149,106,0.5)', 'rgba(127,181,160,0.5)', 'rgba(155,139,180,0.5)', 'rgba(196,132,122,0.4)', 'rgba(240,230,211,0.3)'];

  for (let i = 0; i < 22; i++) {
    const p = document.createElement('div');
    p.className = 'petal';
    p.textContent = petalChars[Math.floor(Math.random() * petalChars.length)];
    p.style.left = Math.random() * 100 + 'vw';
    p.style.fontSize = (Math.random() * 8 + 6) + 'px';
    p.style.color = colors[Math.floor(Math.random() * colors.length)];
    const dur = Math.random() * 15 + 10;
    const delay = Math.random() * -20;
    p.style.animation = `petalFall ${dur}s ${delay}s linear infinite`;
    container.appendChild(p);
  }
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   STARS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function(){
  const container = document.getElementById('stars-container');
  for (let i = 0; i < 80; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    const size = Math.random() * 2.5 + 0.5;
    s.style.cssText = `
      width: ${size}px; height: ${size}px;
      top: ${Math.random() * 100}%;
      left: ${Math.random() * 100}%;
      animation-duration: ${Math.random() * 4 + 2}s;
      animation-delay: ${Math.random() * -6}s;
      opacity: ${Math.random() * 0.5 + 0.1};
    `;
    container.appendChild(s);
  }
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FORM STATE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let selectedTheme = 'introvert';
let selectedMood  = 'amber';
let artToggles    = { annotations: true, doodles: true, torn: true, stamps: true };

function selectTheme(btn) {
  document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  selectedTheme = btn.dataset.theme;
}

function selectMood(btn) {
  document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  selectedMood = btn.dataset.mood;
}

function toggleArt(btn) {
  const key = btn.dataset.toggle;
  artToggles[key] = !artToggles[key];
  btn.classList.toggle('active', artToggles[key]);
  btn.querySelector('.toggle-check').textContent = artToggles[key] ? 'âœ“' : '';
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ZINE DATA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const themeData = {
  introvert: {
    title: 'quiet enough',
    subtitle: 'a zine for the introverted heart',
    badge: 'introvert life',
    prompts: [
      { q: 'your slow morning', p: 'what does your ideal morning look like before the world begins?' },
      { q: 'the energy budget', p: 'what drains you? what fills you back up?' },
      { q: 'your two people', p: 'who are the one or two who truly get you?' },
      { q: 'solitude vs loneliness', p: 'describe the difference you feel in your body.' },
    ],
    quotes: [
      "solitude is not loneliness. it's where you go to remember who you are.",
      "being quiet isn't a flaw waiting to be fixed. it's a whole way of being.",
      "you don't need to perform yourself for anyone.",
      "there is nothing wrong with staying in. staying in is sacred.",
      "the introvert's party is a good book and a cat and rain on the window.",
    ],
    letters: [
      "dear quiet soul,\n\nyou are not broken because parties exhaust you. you are not too much or too little. you are exactly calibrated for a world that is mostly too loud â€” and that calibration is a gift, even when it feels like a wound.",
      "to the one who stayed home:\n\ngood. i hope it was everything you needed it to be. i hope you read until midnight and ate something warm and didn't apologize to anyone.",
    ],
    openings: [
      "there is a kind of person who finds their energy not in the crowd but in the space after the crowd leaves. this zine is for that person.",
      "let's start here: you are not missing something. you are not defective or underdeveloped or in need of pushing yourself to be different. introversion is not a personality bug. it is a feature.",
    ],
  },
  music: {
    title: 'the making hours',
    subtitle: 'a zine about lofi music & creative process',
    badge: 'music & making',
    prompts: [
      { q: 'your creative window', p: 'when do you do your best making? what does that window feel like?' },
      { q: 'the imperfect note', p: 'describe something you made that was flawed in a way that made it more real.' },
      { q: 'tools & rituals', p: 'what do you need around you to create?' },
      { q: 'the voice memo graveyard', p: 'what ideas are you sitting on? what might you do with them?' },
    ],
    quotes: [
      "a melody arrived whole, out of nowhere, at 11pm. i hummed it into my phone and forgot for three weeks.",
      "the best sounds are imperfect. they have breath in them.",
      "lofi: music that sounds like a warm room with rain outside and one lamp on.",
      "making something and releasing it anyway â€” that is the whole practice.",
    ],
    letters: [
      "dear maker,\n\nthat thing you made at 2am with your laptop and a blanket around your shoulders and no one watching â€” that is the real work. the rest is just getting it out into the world.",
    ],
    openings: [
      "somewhere between 9pm and midnight, when the apartment is quiet and the string lights are on, the making begins. this zine is about that threshold â€” the moment before something becomes music.",
    ],
  },
  cozy: {
    title: 'the comfort season',
    subtitle: 'a zine about warmth & small rituals',
    badge: 'cozy season',
    prompts: [
      { q: 'your comfort inventory', p: 'list 10 things that made you feel held this week. not achievements. feelings.' },
      { q: 'the morning ritual', p: 'what slow practice resets you before the day begins?' },
      { q: 'your material comforts', p: 'the mug, the sweater, the particular candle â€” describe them.' },
      { q: 'rain days', p: 'describe your perfect rainy day. who, if anyone, is in it with you?' },
    ],
    quotes: [
      "ceremonial matcha, prepared slowly. the whisk, the foam, the quiet.",
      "the first sip when it's made right â€” that's the whole reason for the morning.",
      "an oversized sweater is armor against the world and also an invitation to be soft.",
      "cozy is not laziness. it is an intentional relationship with comfort.",
    ],
    letters: [
      "dear one who made tea just right today:\n\nthat was enough. that was more than enough. that was, in fact, the whole thing.",
    ],
    openings: [
      "this is a zine about the small things that hold you. the warm mug. the familiar scent. the moment when the weight of the blanket is exactly right. these are not trivial. these are the architecture of a good life.",
    ],
  },
  walking: {
    title: 'the slow city',
    subtitle: 'a zine about walking & noticing things',
    badge: 'walking & noticing',
    prompts: [
      { q: 'your route', p: 'describe a walk you take often. what do you notice that you never tell anyone?' },
      { q: 'things you photographed', p: 'what have you stopped to take a photo of recently? why that thing?' },
      { q: 'moving at a pace that lets you notice', p: 'what does walking do to your thinking?' },
      { q: 'one thing you saw', p: 'describe one thing you noticed on a walk this week in precise detail.' },
    ],
    quotes: [
      "walking is when the ideas come. the rhythm of footsteps is a form of thinking.",
      "a door painted the exact right shade of green. i stopped. i took a photo. some things are worth stopping for.",
      "she doesn't run. walking at a pace that lets you notice things â€” that is for her.",
      "every walk is a slightly different city depending on where you look.",
    ],
    letters: [
      "dear slow walker,\n\nyou are doing it right. the fast ones miss the cat in the window, the tree doing something interesting with its light, the moment the rain starts and the whole street smells different.",
    ],
    openings: [
      "there is a practice of moving through the world at the pace that lets you notice it. not running. not commuting. walking â€” the whole point of which is what you find on the way.",
    ],
  },
  letters: {
    title: 'you are not too much',
    subtitle: 'letters to quiet souls who needed to hear it',
    badge: 'letters to quiet souls',
    prompts: [
      { q: 'a letter to past you', p: 'what do you wish you had known two years ago about being who you are?' },
      { q: 'a letter to a quiet friend', p: 'write something true to someone who is still learning to take up space.' },
      { q: 'a letter you received', p: 'describe the kindest thing someone has said to you lately.' },
      { q: 'a letter you need to write', p: 'is there something unsaid that lives in you? give it a first sentence.' },
    ],
    quotes: [
      "you are not too quiet. the world is too loud.",
      "it's okay to be you â€” the whole, unedited, slightly tired version.",
      "small is not small. the quiet life you are building is immense.",
      "you don't have to explain why you went home early. you already know why.",
    ],
    letters: [
      "dear one,\n\nyou showed up. maybe not to the party, maybe not to the group chat, maybe not in the way anyone expected â€” but you showed up to your own life. that is the whole thing. that is everything.",
      "to whoever finds this:\n\nit's okay to be you. it has always been okay. you have always been enough. i am writing this from a small apartment at 10pm with a cat nearby and rain on the window, and i mean it completely.",
    ],
    openings: [
      "some words are written to specific people and somehow arrive everywhere at once. this zine is a collection of those words â€” letters to the quiet souls who needed to hear something true.",
    ],
  },
  ai: {
    title: 'the space between',
    subtitle: 'a zine about AI, art, and human feeling',
    badge: 'ai & art making',
    prompts: [
      { q: 'the collaboration question', p: 'what does it mean for something to be "yours" if a machine helped make it?' },
      { q: 'pattern vs feeling', p: 'where do you feel the difference between human-made and AI-made? is it real?' },
      { q: 'tools & authorship', p: 'describe a creative tool you use that changed what you were able to make.' },
      { q: 'what remains human', p: 'in a world with AI, what do you believe remains irreducibly yours to offer?' },
    ],
    quotes: [
      "i use AI because the space between human feeling and machine pattern is genuinely interesting to me.",
      "a loop made at 10pm with a midi keyboard and an algorithm is still a song. it still means something.",
      "the tools don't matter. what you make with them does.",
      "authenticity is not about doing everything by hand. it's about meaning what you make.",
    ],
    letters: [
      "dear maker who wonders if it's still real:\n\nit is. the feeling that arrives when you hear the right chord â€” that isn't the machine. that's you. the machine helped you find it, but the recognition is entirely yours.",
    ],
    openings: [
      "here is a question worth sitting with: if a tool helps you make something you couldn't have made alone, and the thing you made is true and beautiful and means something â€” does the tool diminish it? i don't think it does.",
    ],
  },
};

const moodAccents = {
  amber:    { primary: '#d4956a', soft: 'rgba(212,149,106,0.15)', border: 'rgba(212,149,106,0.3)' },
  sage:     { primary: '#7fb5a0', soft: 'rgba(127,181,160,0.15)', border: 'rgba(127,181,160,0.3)' },
  lavender: { primary: '#9b8bb4', soft: 'rgba(155,139,180,0.15)', border: 'rgba(155,139,180,0.3)' },
  midnight: { primary: '#6b7fa3', soft: 'rgba(107,127,163,0.15)', border: 'rgba(107,127,163,0.3)' },
  rose:     { primary: '#c4847a', soft: 'rgba(196,132,122,0.15)', border: 'rgba(196,132,122,0.3)' },
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   HELPERS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function pick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
function shuffle(arr) { return [...arr].sort(() => Math.random() - 0.5); }

function svgDoodles(mood) {
  const col = moodAccents[mood].primary;
  return `
    <div class="doodle-wrap">
      <svg viewBox="0 0 24 24" fill="none" stroke="${col}" stroke-width="1.5"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M2 12h2M20 12h2"/></svg>
      <svg viewBox="0 0 24 24" fill="none" stroke="${col}" stroke-width="1.5"><path d="M12 21C12 21 3 14 3 8.5A5.5 5.5 0 0 1 12 4.5 5.5 5.5 0 0 1 21 8.5C21 14 12 21 12 21z"/></svg>
      <svg viewBox="0 0 24 24" fill="none" stroke="${col}" stroke-width="1.5"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
      <svg viewBox="0 0 24 24" fill="none" stroke="${col}" stroke-width="1.5"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      <svg viewBox="0 0 24 24" fill="none" stroke="${col}" stroke-width="1.5"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
    </div>`;
}

function loadingMessages() {
  return [
    'brewing something soft...',
    'whispering to the algorithm...',
    'folding the pages...',
    'adding a little rain...',
    'finding the right words...',
    'lighting the string lights...',
  ];
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   GENERATE ZINE (AI-powered)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function generateZine() {
  const btn = document.getElementById('generate-btn');
  const loadingWrap = document.getElementById('loading-wrap');
  const output = document.getElementById('zine-output');
  const dedication = document.getElementById('dedication').value.trim();
  const theme = themeData[selectedTheme];
  const mood = moodAccents[selectedMood];

  // Show loading
  btn.disabled = true;
  loadingWrap.classList.add('show');
  output.classList.remove('show');

  // Cycle loading messages
  const msgs = loadingMessages();
  let msgIdx = 0;
  const msgEl = document.getElementById('loading-text');
  const msgInterval = setInterval(() => {
    msgIdx = (msgIdx + 1) % msgs.length;
    msgEl.textContent = msgs[msgIdx];
  }, 1800);

  // Build AI prompt
  const promptText = `You are remy dova, a lofi musician and introvert who creates handcrafted zines for quiet souls. Generate fresh, original content for a personal zine with theme: "${selectedTheme}".

The zine is titled "${theme.title}" with subtitle "${theme.subtitle}".
${dedication ? `This zine is dedicated to: ${dedication}` : ''}

Generate UNIQUE content that feels warm, honest, and poetic â€” never preachy. All lowercase preferred. Remy's voice: intimate, observational, a little melancholy in a beautiful way.

Respond with ONLY a JSON object (no markdown, no backticks) with this exact structure:
{
  "opening": "a 3-4 sentence opening paragraph for the zine â€” sets the world",
  "poem": "a short 6-10 line poem or lyric fragment (NOT titled, just the verse itself)",
  "letter": "a short letter opening with 'dear quiet soul,' or similar â€” 4-6 sentences, intimate",
  "quote1": "a short 1-2 sentence quote or observation",
  "quote2": "a different short 1-2 sentence quote or observation", 
  "prompt1_response": "a 3-4 sentence response/reflection for journal prompt: ${shuffle(theme.prompts)[0].q}",
  "prompt2_response": "a 3-4 sentence response/reflection for journal prompt: ${shuffle(theme.prompts)[1].q}",
  "closing": "a 2-3 sentence closing thought that ends with 'it's okay to be you.' or a variation"
}`;

  let aiContent = null;

  try {
    const response = await fetch("https://api.anthropic.com/v1/messages", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        model: "claude-sonnet-4-20250514",
        max_tokens: 1000,
        messages: [{ role: "user", content: promptText }]
      })
    });
    const data = await response.json();
    const rawText = data.content?.map(c => c.text || '').join('');
    const cleaned = rawText.replace(/```json|```/g, '').trim();
    aiContent = JSON.parse(cleaned);
  } catch(e) {
    // Fallback to local content
    console.log('AI fallback:', e);
    aiContent = {
      opening: pick(theme.openings),
      poem: "something soft is waiting\non the other side of the noise â€”\nyou don't have to push through.\nyou can simply\nstep aside\nand let the quiet find you.",
      letter: pick(theme.letters),
      quote1: pick(theme.quotes),
      quote2: pick(theme.quotes),
      prompt1_response: "this is a question worth sitting with. not rushing to answer, but letting it settle like sediment in a jar of water. the answer is already in you somewhere.",
      prompt2_response: "small things are often the most telling. the detail you return to again and again is usually where the real feeling lives.",
      closing: "you are building something real here. slowly, carefully, in the quiet. it's okay to be you."
    };
  }

  clearInterval(msgInterval);

  // Render zine pages
  const pages = buildZineHTML(aiContent, theme, mood, dedication);
  document.getElementById('zine-pages').innerHTML = pages;

  loadingWrap.classList.remove('show');
  btn.disabled = false;
  output.classList.add('show');
  output.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   BUILD ZINE HTML
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function buildZineHTML(ai, theme, mood, dedication) {
  const acc = mood.primary;
  const tornClass = artToggles.torn ? 'torn-edge' : '';
  const accentGrad = `linear-gradient(90deg, ${acc}, ${acc}88)`;

  let pages = '';

  // PAGE 1 â€” COVER
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}; text-align: center; padding-bottom: 3rem;">
    <div class="tape"></div>
    <div class="zine-issue-badge" style="border-color: ${acc}40; color: ${acc};">${theme.badge}</div>
    ${artToggles.doodles ? svgDoodles(selectedMood) : ''}
    <h1 class="zine-page-title" style="font-size: 2.5rem; margin: 1rem 0 0.5rem;">${theme.title}</h1>
    <p style="font-family: 'Lora', serif; font-style: italic; color: var(--text-dim); margin-bottom: 1.5rem;">${theme.subtitle}</p>
    ${artToggles.annotations ? `<div class="annotation" style="color: ${acc};">âœ¦ a handcrafted zine âœ¦</div>` : ''}
    ${dedication ? `
    <div class="dedication-wrap" style="margin-top: 1.5rem;">
      <div class="dedication-label">this zine is for</div>
      <div class="dedication-name">${dedication}</div>
    </div>` : ''}
    ${artToggles.stamps ? `<div class="stamp" style="border-color: ${acc}; color: ${acc}; margin: 1.5rem auto 0; display: block; width: fit-content;">remy's world âœ¦</div>` : ''}
    <div class="zine-hideout-link"><a href="https://remydova.github.io/lofi-hideout/" target="_blank">need a quiet moment? â†’ lofi hideout â˜•</a></div>
    <span class="zine-page-number">01</span>
  </div>`;

  // PAGE 2 â€” OPENING
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}">
    <span class="zine-page-number">02</span>
    ${artToggles.annotations ? `<div class="annotation" style="color: ${acc};">a note to begin â†’</div>` : ''}
    <div class="zine-body">
      <p>${ai.opening}</p>
    </div>
    <blockquote style="border-left: 2px solid ${acc}; padding-left: 1rem; margin: 1.5rem 0; font-style: italic; color: var(--text-dim);">
      "${ai.quote1}"
    </blockquote>
    ${artToggles.doodles ? svgDoodles(selectedMood) : ''}
    <div class="zine-hideout-link"><a href="https://remydova.github.io/lofi-hideout/" target="_blank">need a quiet moment? â†’ lofi hideout â˜•</a></div>
  </div>`;

  // PAGE 3 â€” POEM / LYRIC
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}; text-align: center;">
    <span class="zine-page-number">03</span>
    ${artToggles.stamps ? `<div class="stamp" style="border-color: ${acc}; color: ${acc}; margin: 0 auto 1rem; display: block; width: fit-content;">verse</div>` : ''}
    <div class="zine-body" style="white-space: pre-line; text-align: center; font-style: italic; padding: 1rem 2rem; line-height: 2.2;">
${ai.poem}
    </div>
    ${artToggles.annotations ? `<div class="annotation" style="color: ${acc}; font-size: 0.9rem; margin-top: 1rem;">â€” written for you, quiet soul</div>` : ''}
    <div class="zine-hideout-link"><a href="https://remydova.github.io/lofi-hideout/" target="_blank">need a quiet moment? â†’ lofi hideout â˜•</a></div>
  </div>`;

  // PAGE 4 â€” LETTER
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}">
    <span class="zine-page-number">04</span>
    <h2 class="zine-page-title" style="font-size: 1.4rem; margin-bottom: 1.2rem;">a letter</h2>
    <div class="zine-body" style="white-space: pre-line; line-height: 1.9;">${ai.letter}</div>
    ${artToggles.annotations ? `<div class="annotation" style="color: ${acc}; margin-top: 1rem;">â€” with love, remy</div>` : ''}
    <div class="zine-hideout-link"><a href="https://remydova.github.io/lofi-hideout/" target="_blank">need a quiet moment? â†’ lofi hideout â˜•</a></div>
  </div>`;

  // PAGE 5 â€” PROMPTS
  const prompts = shuffle(themeData[selectedTheme].prompts);
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}">
    <span class="zine-page-number">05</span>
    <h2 class="zine-page-title" style="font-size: 1.4rem; margin-bottom: 0.5rem;">for your journal</h2>
    ${artToggles.annotations ? `<div class="annotation" style="color: ${acc};">no right answers here â†’</div>` : ''}
    
    <div class="prompt-block" style="border-color: ${acc}; margin-top: 1rem;">
      <div class="prompt-label" style="color: ${acc};">${prompts[0].q}</div>
      <div class="prompt-text">${prompts[0].p}</div>
    </div>
    <div class="write-lines">${'<div class="write-line"></div>'.repeat(4)}</div>

    <div class="prompt-block" style="border-color: ${acc}">
      <div class="prompt-label" style="color: ${acc};">${prompts[1].q}</div>
      <div class="prompt-text">${prompts[1].p}</div>
    </div>
    <div class="write-lines">${'<div class="write-line"></div>'.repeat(4)}</div>
    
    <blockquote style="border-left: 2px solid ${acc}; padding-left: 1rem; margin: 1rem 0; font-style: italic; color: var(--text-dim); font-size: 0.9rem;">
      "${ai.quote2}"
    </blockquote>
    <div class="zine-hideout-link"><a href="https://remydova.github.io/lofi-hideout/" target="_blank">need a quiet moment? â†’ lofi hideout â˜•</a></div>
  </div>`;

  // PAGE 6 â€” REFLECTIONS
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}">
    <span class="zine-page-number">06</span>
    <h2 class="zine-page-title" style="font-size: 1.4rem; margin-bottom: 1rem;"><em>reflections</em></h2>
    ${artToggles.doodles ? svgDoodles(selectedMood) : ''}
    <div class="zine-body">
      <h3>${prompts[0].q}</h3>
      <p>${ai.prompt1_response}</p>
      <h3>${prompts[1].q}</h3>
      <p>${ai.prompt2_response}</p>
    </div>
    <div class="zine-hideout-link"><a href="https://remydova.github.io/lofi-hideout/" target="_blank">need a quiet moment? â†’ lofi hideout â˜•</a></div>
  </div>`;

  // PAGE 7 â€” CLOSING / BACK COVER
  pages += `
  <div class="zine-page ${tornClass}" style="--page-accent: ${accentGrad}; text-align: center; padding-bottom: 3rem;">
    <span class="zine-page-number">07</span>
    ${artToggles.doodles ? svgDoodles(selectedMood) : ''}
    <div style="margin: 1.5rem 0;">
      ${artToggles.annotations ? `<div class="annotation" style="color: ${acc}; font-size: 1.1rem;">âœ¦</div>` : ''}
    </div>
    <div class="zine-body" style="font-style: italic; max-width: 380px; margin: 0 auto; line-height: 1.9;">
      ${ai.closing}
    </div>
    ${artToggles.stamps ? `
    <div style="margin-top: 2rem;">
      <div class="stamp" style="border-color: ${acc}; color: ${acc}; margin: 0 auto; display: block; width: fit-content;">quiet soul âœ¦</div>
    </div>` : ''}
    <div style="margin-top: 2.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.06);">
      <p style="font-family: 'Caveat', cursive; font-size: 0.9rem; color: var(--text-dim); margin-bottom: 0.8rem;">part of remy's world â€” a free handcrafted space for quiet souls</p>
      <a href="https://remydova.github.io/lofi-hideout/" target="_blank" style="font-family: 'Caveat', cursive; font-size: 1.1rem; color: ${acc}; text-decoration: none; display: inline-block; border: 1px solid ${acc}40; padding: 0.4rem 1rem; border-radius: 20px;">need a quiet moment? â†’ lofi hideout â˜•</a>
      <p style="font-family: 'Caveat', cursive; font-size: 0.8rem; color: var(--text-dim); margin-top: 0.8rem; opacity: 0.5;">remy-dova-world.netlify.app</p>
    </div>
  </div>`;

  return pages;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   DOWNLOAD â€” opens standalone zine in new tab
   (user can then File > Save or Print > Save as PDF)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function downloadZine() {
  const pagesHTML = document.getElementById('zine-pages').innerHTML;
  const theme = themeData[selectedTheme];
  const html = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>${theme.title} Â· remy's world zine</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Lora:ital,wght@0,400;0,500;1,400&family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; -webkit-print-color-adjust:exact !important; print-color-adjust:exact !important; }
  :root { --bg:#0c0c18; --surface:#13131f; --amber:#d4956a; --teal:#7fb5a0; --text:#e8ddd0; --text-dim:rgba(232,221,208,0.65); --border:rgba(212,149,106,0.25); --cream:#f0e6d3; }
  body { background:var(--bg); color:var(--text); font-family:'Lora',serif; padding:2rem 1.5rem; max-width:680px; margin:0 auto; }
  
  /* top bar */
  .zine-top-bar { text-align:center; padding:1.5rem 0 2rem; border-bottom:1px solid var(--border); margin-bottom:2rem; }
  .zine-top-bar h1 { font-family:'Playfair Display',serif; font-size:1.3rem; color:var(--cream); font-style:italic; }
  .zine-top-bar p { font-family:'Caveat',cursive; font-size:0.9rem; color:var(--text-dim); margin-top:0.3rem; }
  .share-btn { display:inline-block; margin-top:1rem; background:rgba(127,181,160,0.15); border:1px solid rgba(127,181,160,0.4); border-radius:20px; padding:0.6rem 1.4rem; font-family:'Caveat',cursive; font-size:1.05rem; color:#7fb5a0; cursor:pointer; text-decoration:none; transition:all 0.2s; }
  .share-btn:hover { background:rgba(127,181,160,0.25); transform:translateY(-1px); }
  .share-btn.copied { color:#7fb5a0; border-color:#7fb5a0; background:rgba(127,181,160,0.3); }

  /* pages */
  .zine-page { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:2.5rem; margin-bottom:1.5rem; position:relative; overflow:hidden; page-break-after:always; page-break-inside:avoid; }
  .zine-page::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; background:var(--page-accent,linear-gradient(90deg,#d4956a,#7fb5a0)); }
  .zine-page-number { position:absolute; top:1rem; right:1.5rem; font-family:'Caveat',cursive; font-size:0.85rem; color:var(--text-dim); }
  .zine-page-title { font-family:'Playfair Display',serif; font-size:1.8rem; font-weight:700; color:var(--cream); margin-bottom:0.4rem; line-height:1.2; }
  .zine-page-title em { font-style:italic; }
  .zine-issue-badge { display:inline-block; font-family:'Caveat',cursive; font-size:0.85rem; color:var(--amber,#d4956a); border:1px solid rgba(212,149,106,0.3); padding:0.2rem 0.6rem; border-radius:20px; margin-bottom:1.2rem; }
  .zine-body { font-family:'Lora',serif; font-size:0.95rem; line-height:1.85; color:var(--text-dim); }
  .zine-body p { margin-bottom:1rem; }
  .zine-body h3 { font-family:'Playfair Display',serif; font-size:1.1rem; color:var(--cream); margin:1.5rem 0 0.5rem; font-style:italic; }
  blockquote { border-left:2px solid #d4956a; padding-left:1rem; margin:1.5rem 0; font-style:italic; color:var(--text-dim); }
  .annotation { font-family:'Caveat',cursive; font-size:1rem; color:#d4956a; transform:rotate(-2deg); display:inline-block; margin:0.5rem 0; opacity:0.85; }
  .doodle-wrap { display:flex; flex-wrap:wrap; gap:0.4rem; margin:1rem 0; opacity:0.7; }
  .doodle-wrap svg { width:24px; height:24px; }
  .stamp { display:inline-block; border:2px solid #7fb5a0; color:#7fb5a0; font-family:'Caveat',cursive; font-size:0.8rem; padding:0.2rem 0.6rem; border-radius:4px; transform:rotate(-3deg); opacity:0.7; letter-spacing:0.05em; }
  .tape { display:block; width:60px; height:18px; background:rgba(255,255,255,0.07); border-top:1px solid rgba(255,255,255,0.1); border-bottom:1px solid rgba(255,255,255,0.1); transform:rotate(-1deg); margin:0 auto 0.5rem; }
  .prompt-block { background:rgba(255,255,255,0.04); border-left:2px solid #d4956a; border-radius:0 10px 10px 0; padding:0.8rem 1rem; margin:1rem 0; }
  .prompt-label { font-family:'Caveat',cursive; font-size:0.8rem; color:#d4956a; letter-spacing:0.05em; margin-bottom:0.3rem; }
  .prompt-text { font-family:'Lora',serif; font-size:0.9rem; color:var(--text-dim); font-style:italic; }
  .write-lines { margin:1rem 0; }
  .write-line { border-bottom:1px solid rgba(255,255,255,0.07); height:30px; }
  .dedication-wrap { text-align:center; padding:1rem 0 2rem; }
  .dedication-label { font-family:'Caveat',cursive; font-size:0.9rem; color:var(--text-dim); margin-bottom:0.5rem; }
  .dedication-name { font-family:'Playfair Display',serif; font-size:1.8rem; font-style:italic; color:var(--cream); }
  .zine-hideout-link { display:block; text-align:center; margin-top:1.5rem; padding-top:1rem; border-top:1px solid rgba(255,255,255,0.07); }
  .zine-hideout-link a { font-family:'Caveat',cursive; font-size:1rem; color:#7fb5a0; text-decoration:none; }

  /* footer */
  .zine-footer { text-align:center; padding:1.5rem 0 0.5rem; font-family:'Caveat',cursive; font-size:0.85rem; color:rgba(232,221,208,0.25); }
  .no-print { }

  @media print {
    .no-print { display:none !important; }
    .zine-top-bar { display:none !important; }
    body { padding:0.5rem; }
    .zine-page { border-radius:8px; margin-bottom:0; }
  }
</style>
</head>
<body>

<div class="zine-top-bar no-print">
  <h1>${theme.title}</h1>
  <p>${theme.subtitle} Â· generated at remy's world</p>
  <button class="share-btn" id="share-btn" onclick="copyLink()">ğŸ’Œ copy link to share</button>
</div>

${pagesHTML}

<p class="zine-footer">made with love at remy's world Â· <a href="https://remydova.github.io/lofi-hideout/" style="color:#7fb5a0;">lofi hideout â˜•</a> Â· remy-dova-world.netlify.app</p>

<script>
document.querySelectorAll('.zine-actions').forEach(el => el.remove());
function copyLink() {
  const btn = document.getElementById('share-btn');
  navigator.clipboard.writeText(window.location.href).then(() => {
    btn.textContent = 'âœ“ link copied!';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.textContent = 'ğŸ’Œ copy link to share';
      btn.classList.remove('copied');
    }, 2500);
  }).catch(() => {
    // fallback â€” select the url manually
    const dummy = document.createElement('input');
    dummy.value = window.location.href;
    document.body.appendChild(dummy);
    dummy.select();
    document.execCommand('copy');
    document.body.removeChild(dummy);
    btn.textContent = 'âœ“ link copied!';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.textContent = 'ğŸ’Œ copy link to share';
      btn.classList.remove('copied');
    }, 2500);
  });
}
<\/script>
</body>
</html>`;

  const blob = new Blob([html], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  window.open(url, '_blank');
}
</script>
</body>
</html>



